# JSAV grader notes

This document contains notes about grading of JSAV exercises. The grading is performed by comparing the model generated by the model answer function (defined in the exercise JavaScript file) with the student's solution.

## Model answer function

The model answer function is the model solution for the exercise. It both shows the correct answer when the model solution button is clicked and is used for grading the student's solution.

In the model answer function, two types of steps can be done:

- `gradableStep()`: marks the current state of the model solution to be used in the grading and displays this step in the model solution slideshow
- `step()`: a step that is shown in the model answer slideshow, but has no bearing on the grading. This can be used to give more explanations for intermediary steps.

The model answer function takes a single parameter, which is a reference to the JSAV animation of the model answer. Calling the model answer function is handled by the JSAV library.

The model answer function returns the data structures that are used for grading. The returned value is either a data structure directly, or an array of data structures. The order of the data structures should be the same between the exercise initialization function and the model answer function.

## Exercise creation parameters

To create the exercise:

    var exercise = av.exercise(modelSolution, reset,
                    {feedback: "continuous", compare: {class: "jsavhighlight"}});
    exercise.reset();

Three parameters are required:

- `modelSolution`: the name of the function that contains the model solution
- `reset`: a function that resets the exercise
- `options object`: an object that contains the extra parameters. It is unclear which ones are required. `compare` sets the properties to compare the model solution and student solution on.

### Compare option

The `compare` parameter of object `options` can take the following options:

- `css` property
- `class` class on the html element

## How grader compares

Below is info about how the data structures used for grading are compared between student's solution and model solution.

In general:

1. Check if data structures are the same
2. Check if sub-data structures are the same
3. Check with regards to css option or class option
4. If all is the same, consider the two to be equal

Below is a breakdown of the comparison per data structure.

### Trees

1. Check is to see if both data structures are trees. If false, they cannot be equal
2. Check for each node if they are equal, with `options` passed along in this call

### Tree nodes

1. Check if the value of the nodes is equal
2. if options exist:
    1. if css options: check if css is the same for the css options param
    2. if class options: check if class is the same for the class options param
3. if edge to parent: check if edge is the same with regards to options
4. Check the children:
    1. Check if same amount of children
    2. check if all children are the same with respect to the above
5. If nothing is unequal: consider equal

### Graphs

1. Check if the other data structure is a graph
2. Check if node and edge counts are equal
3. Sort all nodes and check if all nodes are equal, with `options` passed along

### Graph nodes

1. Check if the value of the nodes is equal
2. if options exist:
    1. if css options: check if css is the same for the css options param
    2. if class options: check if class is the same for the class options param
3. check neighbours:
    1. check if same number of neighbours
    2. check if the neighbours are the same with the respect to the above
    3. check if the edges are the same with respect to `options`.
4. If nothing is unequal: consider equal

### Matrix

if the other object is an aray:

1. check for each item in array to be the same
2. if nothing is unequal: consider equal

if the other object is a JSAV matrix

1. Check if the arrays are the same length
2. check if each item of the arrays are the same
3. if nothing is unequal: consider equal

### Array

if other object is an array or JSAV array:

1. check if the lengths are the same
2. check if all items are the same
3. if options:
    1. if css options: check if css is the same for the css options param
    2. if class options: check if class is the same for the class options param
4. if nothing is unequal: consider equal

### Index

1. check if index value are the same
2. if options:
    1. if css options: check if css is the same for the css options param
    2. if class options: check if class is the same for the class options param
3. if nothing is unequal: consider equal

### Code

#### Variable

1. check if other item has the same value
2. if options:
    1. if css options: check if css is the same for the css options param
    2. if class options: check if class is the same for the class options param
3. if nothing is unequal: consider equal

Pointer:

1. check if other item is a pointer
2. if options:
    1. if css options: check if css is the same for the css options param
    2. if class options: check if class is the same for the class options param
3. if nothig is unequal thus far: return whether the target is the same.

### Edge

This one is located within the `datastructures.js` file.

1. check if other item is an edge
2. if options:
    1. if not check other nodes: check if start and end nodes are the same
    2. if css options: check if css is the same for the css options param
    3. if class options: check if class is the same for the class options param
3. Check if weight is the same
4. if nothing is unequal: consider equal

### Label

In `graphicals.js` file.

1. check if other item is a label
2. check if text is the same
3. if options:
    1. if css options: check if css is the same for the css options param
    2. if class options: check if class is the same for the class options param
4. if nothing is unequal: consider equal

### List

1. check if lists are both empty (=> return true)
2. check if one list is empty, other is not empty (=> return false)
3. check if first nodes of both are equal

### List node

1. check if both nodes have same value
2. if options:
    1. if css options: check if css is the same for the css options param
    2. if class options: check if class is the same for the class options param
3. check if edge to next node is the same
4. check above for if
5. if nothing is unequal: consider equal
